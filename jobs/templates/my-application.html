{% extends 'dash-back.html' %}
{% block title %}My Applications | Job Board {% endblock %}
{% block dash %}
<div class="container-fluid py-4">
	<div class="row justify-content-center">
		<div class="col-lg-12">
			<div class="card">
				<div class="card-body">
					<h4 class="card-title mb-4">My Applications</h4>
					{% if own_jobs %}
					<div class="table-responsive">
						<table class="table table-hover align-middle">
							<thead class="table-light">
								<tr>
									<th>Job Title</th>
									<th>Company</th>
									<th>Status</th>
									<th>Applied On</th>
									<th>Resume</th>
									<th>View Job</th>
								</tr>
							</thead>
							<tbody>
								{% for app in own_jobs %}
								<tr>
									<td>{{ app.job.title }}</td>
									<td>{{ app.job.recruiter.company_name|default:'â€”' }}</td>
									<td>
										<span class="badge {% if app.status == 'applied' %}bg-primary{% elif app.status == 'shortlisted' %}bg-success{% else %}bg-danger{% endif %}">
											{{ app.get_status_display }}
										</span>
									</td>
									<td>{{ app.applied_at|date:'M d, Y' }}</td>
									<td>
										{% if app.resume %}
											<a class="btn btn-primary btn-sm" href="{{ app.resume.url }}" target="_blank">Download</a>
										{% else %}&mdash;{% endif %}
									</td>
									<td>
										<a href="{% url 'apply_job' app.job.id %}" class="btn btn-sm btn-outline-primary">&#128065;</a>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					{% else %}
						<div class="alert alert-info mb-0">You have not applied to any jobs yet.</div>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}